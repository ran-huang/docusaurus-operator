<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<title data-rh="true">TiDB Operator v1.1 Notes | TiDB in Kubernetes Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ran-huang.github.io/docusaurus-operator/notes-tidb-operator-v1.1"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TiDB Operator v1.1 Notes | TiDB in Kubernetes Docs"><meta data-rh="true" name="description" content="This document introduces important notes for TiDB Operator v1.1."><meta data-rh="true" property="og:description" content="This document introduces important notes for TiDB Operator v1.1."><link data-rh="true" rel="icon" href="/docusaurus-operator/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ran-huang.github.io/docusaurus-operator/notes-tidb-operator-v1.1"><link data-rh="true" rel="alternate" href="https://ran-huang.github.io/docusaurus-operator/notes-tidb-operator-v1.1" hreflang="en"><link data-rh="true" rel="alternate" href="https://ran-huang.github.io/docusaurus-operator/notes-tidb-operator-v1.1" hreflang="x-default"><link rel="stylesheet" href="/docusaurus-operator/assets/css/styles.e3dbdb50.css">
<link rel="preload" href="/docusaurus-operator/assets/js/runtime~main.5f239d35.js" as="script">
<link rel="preload" href="/docusaurus-operator/assets/js/main.4a76a225.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docusaurus-operator/"><div class="navbar__logo"><img src="/docusaurus-operator/img/tidb-logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docusaurus-operator/img/tidb-logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">TiDB in Kubernetes</b></a><a class="navbar__item navbar__link" href="/docusaurus-operator/">Docs</a><a class="navbar__item navbar__link" href="/docusaurus-operator/architecture">Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ran-huang/docusaurus-operator" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><main class="docMainContainer_TCnq docMainContainerEnhanced_WDCb"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>TiDB Operator v1.1 Notes</h1><p>This document introduces important notes for TiDB Operator v1.1.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="pingcap-no-longer-updates-or-maintains-tidb-cluster-chart">PingCAP no longer updates or maintains tidb-cluster chart<a class="hash-link" href="#pingcap-no-longer-updates-or-maintains-tidb-cluster-chart" title="Direct link to heading">â€‹</a></h2><p>Since TiDB Operator v1.1.0, PingCAP no longer updates the tidb-cluster chart. The components and features that have been managed using the tidb-cluster chart will be managed in new ways in v1.1. See the following table for details:</p><table><thead><tr><th align="left">Components/Features</th><th align="left">Managements in TiDB Operator v1.1</th></tr></thead><tbody><tr><td align="left">TiDB Cluster (PD, TiDB, TiKV)</td><td align="left"><a href="https://github.com/pingcap/tidb-operator/blob/master/docs/api-references/docs.md" target="_blank" rel="noopener noreferrer">TidbCluster CR</a></td></tr><tr><td align="left">TiDB Monitor</td><td align="left"><a href="https://github.com/pingcap/tidb-operator/blob/master/manifests/monitor/tidb-monitor.yaml" target="_blank" rel="noopener noreferrer">TidbMonitor CR</a></td></tr><tr><td align="left">TiDB Initializer</td><td align="left"><a href="https://github.com/pingcap/tidb-operator/blob/master/manifests/initializer/tidb-initializer.yaml" target="_blank" rel="noopener noreferrer">TidbInitializer CR</a></td></tr><tr><td align="left">Scheduled Backup</td><td align="left"><a href="https://github.com/pingcap/tidb-operator/blob/master/manifests/backup/backup-schedule-aws-s3-br.yaml" target="_blank" rel="noopener noreferrer">BackupSchedule CR</a></td></tr><tr><td align="left">Pump</td><td align="left"><a href="https://github.com/pingcap/tidb-operator/blob/master/docs/api-references/docs.md" target="_blank" rel="noopener noreferrer">TidbCluster CR</a></td></tr><tr><td align="left">Drainer</td><td align="left"><a href="https://github.com/pingcap/tidb-operator/tree/master/charts/tidb-drainer" target="_blank" rel="noopener noreferrer">tidb-drainer chart</a></td></tr><tr><td align="left">Importer</td><td align="left"><a href="https://github.com/pingcap/tidb-operator/tree/master/charts/tikv-importer" target="_blank" rel="noopener noreferrer">tikv-importer chart</a></td></tr></tbody></table><ul><li><p>PingCAP will continue releasing new versions of the tidb-cluster chart but will not add new features to it. However, community members can still add new features to it.</p></li><li><p>If you have deployed your TiDB cluster by TiDB Operator (v1.0.0 &lt;= version &lt; v1.1), after TiDB Operator is upgraded to v1.1, you can still upgrade and manage your TiDB cluster using the tidb-cluster chart v1.1.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="switch-the-components-and-features-managed-by-tidb-cluster-chart-to-services-fully-supported-by-tidb-operator-v11">Switch the components and features managed by tidb-cluster chart to services fully supported by TiDB Operator v1.1<a class="hash-link" href="#switch-the-components-and-features-managed-by-tidb-cluster-chart-to-services-fully-supported-by-tidb-operator-v11" title="Direct link to heading">â€‹</a></h2><p>In TiDB Operator v1.1, you can still manage your cluster using Helm and the tidb-cluster chart. Although new features will not be added to the tidb-cluster chart, you can contribute new features to the tidb-cluster chart by yourself, or switch to services that are fully supported by TiDB Operator v1.1.</p><p>This section describes how to switch your components and features to services in TiDB Operator v1.1.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="discovery">Discovery<a class="hash-link" href="#discovery" title="Direct link to heading">â€‹</a></h3><p>The Discovery service is generated by TiDB Operator automatically, so you do not need to configure it on your own.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="pdtidbtikv">PD/TiDB/TiKV<a class="hash-link" href="#pdtidbtikv" title="Direct link to heading">â€‹</a></h3><p>In tidb-cluster chart, the configurations of PD, TiDB, and TiKV are rendered into ConfigMap by Helm.</p><p>Since TiDB Operator v1.1, you can configure TiDB, TiKV, and PD directly in TidbCluster Custom Resource (CR). For configuration details, refer to <a href="/docusaurus-operator/configure-a-tidb-cluster">Configure a TiDB Cluster using TidbCluster</a>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The way TiDB Operator renders configurations is different from that of Helm. If you migrate configurations from <code>tidb-cluster chart values.yaml</code> to CR, the corresponding components might be rolling updated.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="monitor">Monitor<a class="hash-link" href="#monitor" title="Direct link to heading">â€‹</a></h3><p>To create the TidbMonitor CR and manage the Monitor component, refer to <a href="/docusaurus-operator/monitor-a-tidb-cluster">Monitor a TiDB Cluster</a>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><ul><li>The <code>metadata.name</code> in the TidbMonitor CR must be consistent with the name of the TidbCluster CR in the cluster.</li><li>The way TiDB Operator renders resources is different from that of Helm. If you migrate configurations from <code>tidb-cluster chart values.yaml</code> to TidbMonitor CR, the Monitor component might be rolling updated.</li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="initializer">Initializer<a class="hash-link" href="#initializer" title="Direct link to heading">â€‹</a></h3><ul><li><p>If the initialization job is executed before TiDB Operator is upgraded to v1.1, the initialization job does not need to be migrated from the tidb-cluster chart to the TidbInitializer CR.</p></li><li><p>If the initialization job is not executed before TiDB Operator is upgraded to v1.1, and the password for the TiDB root user is not modified, you need to initialize your cluster after upgrading to TiDB Operator v1.1. For details, refer to <a href="/docusaurus-operator/initialize-a-cluster">Initialize a TiDB Cluster in Kubernetes</a>.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="pump">Pump<a class="hash-link" href="#pump" title="Direct link to heading">â€‹</a></h3><p>After TiDB Operator is upgraded to v1.1, you can modify the TidbCluster CR and add the configuration of Pump. You can then manage the Pump component using TidbCluster CR.</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">spec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pump</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">baseImage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pingcap/tidb</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">binlog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v5.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">storageClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> local</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 30Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">addr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 0.0.0.0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8250</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">gc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">heartbeat-interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can modify <code>version</code>, <code>replicas</code>, <code>storageClassName</code>, <code>requests.storage</code>, and other configurations according to the needs of your cluster.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The way TiDB Operator renders resources is different from that of Helm. If you migrate configurations from <code>tidb-cluster chart values.yaml</code> to TidbCluster CR, the Pump component might be rolling updated.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="scheduled-backup">Scheduled Backup<a class="hash-link" href="#scheduled-backup" title="Direct link to heading">â€‹</a></h3><p>After TiDB Operator is upgraded to v1.1, you can configure the scheduled full backup using BackupSchedule CR:</p><ul><li>If the TiDB cluster version &lt; v3.1, refer to <a href="/docusaurus-operator/backup-to-s3#scheduled-full-backup-to-s3-compatible-storage">Scheduled backup using Dumpling</a></li><li>If the TiDB cluster version &gt;= v3.1, refer to <a href="/docusaurus-operator/backup-to-aws-s3-using-br#scheduled-full-backup">Scheduled backup using BR</a></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><ul><li>Currently, with BackupSchedule CR, you can back up data only to S3 and GCS using Dumpling, and back up data to S3 using BR. If you perform the scheduled full backup and send data to local Persistent Volume Claim (PVC) before the upgrade, you cannot switch to the CR management after the upgrade.</li><li>If you switch to the CR management, to avoid repeated backup, delete the Cronjob of the previous scheduled full backup.</li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="drainer">Drainer<a class="hash-link" href="#drainer" title="Direct link to heading">â€‹</a></h3><ul><li>If Drainer is not deployed before TiDB Operator is upgraded to v1.1, you can deploy Drainer as in <a href="/docusaurus-operator/deploy-tidb-binlog#deploy-drainer">Deploy multiple drainers</a>.</li><li>If Drainer is already deployed using the tidb-drainer chart before TiDB Operator is upgraded to v1.1, it is recommended to continue managing Drainer using the tidb-drainer chart.</li><li>If Drainer is already deployed using the tidb-cluster chart before TiDB Operator is upgraded to v1.1, it is recommended to manage Drainer using kubectl.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="tikv-importer">TiKV Importer<a class="hash-link" href="#tikv-importer" title="Direct link to heading">â€‹</a></h3><ul><li>If TiKV Importer is not deployed before TiDB Operator is upgraded to v1.1, you can deploy TiKV Importer as in <a href="/docusaurus-operator/restore-data-using-tidb-lightning#deploy-tikv-importer">Deploy TiKV Importer</a>.</li><li>If TiKV Importer is already deployed before TiDB Operator is upgraded to v1.1, it is recommended to manage TiKV Importer using kubectl.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="switch-other-components-or-features-managed-by-chart-to-services-supported-by-tidb-operator-v11">Switch other components or features managed by chart to services supported by TiDB Operator v1.1<a class="hash-link" href="#switch-other-components-or-features-managed-by-chart-to-services-supported-by-tidb-operator-v11" title="Direct link to heading">â€‹</a></h2><p>This section describes how to switch other components and features managed by the chart to services in TiDB Operator v1.1.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ad-hoc-backup">Ad-hoc backup<a class="hash-link" href="#ad-hoc-backup" title="Direct link to heading">â€‹</a></h2><p>After TiDB Operator is upgraded to v1.1, you can perform backup using the Backup CR. Backup with Dumpling supports full backup, and backup with BR supports both full backup and incremental backup.</p><ul><li>If the TiDB cluster version &lt; v3.1, refer to <a href="/docusaurus-operator/backup-to-s3#ad-hoc-full-backup-to-s3-compatible-storage">Ad-hoc full backup using Dumpling</a>.</li><li>If the TiDB cluster version &gt;= v3.1, refer to <a href="/docusaurus-operator/backup-to-aws-s3-using-br#ad-hoc-backup">Ad-hoc backup using BR</a>.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Currently, with Backup CR, you can back up data only to S3 and GCS using Dumpling or BR. If you perform the scheduled full backup and send data to local Persistent Volume Claim (PVC) before the upgrade, you cannot switch to the CR management after the upgrade.</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="restoration">Restoration<a class="hash-link" href="#restoration" title="Direct link to heading">â€‹</a></h2><p>After the TiDB Operator is upgraded to v1.1, you can restore data using the Restore CR.</p><ul><li>If the TiDB cluster version &lt; v3.1, refer to <a href="/docusaurus-operator/restore-from-s3">Restore Data from S3-Compatible Storage Using TiDB Lightning</a>.</li><li>If the TiDB cluster version &gt;= v3.1, refer to <a href="/docusaurus-operator/restore-from-aws-s3-using-br">Restore Data from S3-Compatible Storage Using BR</a>.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Currently, with Restore CR, you can use TiDB Lightning or BR to restore data from S3 and GCS. If you need to restore the backup data from local Persistent Volume Claim (PVC), you cannot switch to the CR management.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/notes-tidb-operator-v1.1.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pingcap-no-longer-updates-or-maintains-tidb-cluster-chart" class="table-of-contents__link toc-highlight">PingCAP no longer updates or maintains tidb-cluster chart</a></li><li><a href="#switch-the-components-and-features-managed-by-tidb-cluster-chart-to-services-fully-supported-by-tidb-operator-v11" class="table-of-contents__link toc-highlight">Switch the components and features managed by tidb-cluster chart to services fully supported by TiDB Operator v1.1</a><ul><li><a href="#discovery" class="table-of-contents__link toc-highlight">Discovery</a></li><li><a href="#pdtidbtikv" class="table-of-contents__link toc-highlight">PD/TiDB/TiKV</a></li><li><a href="#monitor" class="table-of-contents__link toc-highlight">Monitor</a></li><li><a href="#initializer" class="table-of-contents__link toc-highlight">Initializer</a></li><li><a href="#pump" class="table-of-contents__link toc-highlight">Pump</a></li><li><a href="#scheduled-backup" class="table-of-contents__link toc-highlight">Scheduled Backup</a></li><li><a href="#drainer" class="table-of-contents__link toc-highlight">Drainer</a></li><li><a href="#tikv-importer" class="table-of-contents__link toc-highlight">TiKV Importer</a></li></ul></li><li><a href="#switch-other-components-or-features-managed-by-chart-to-services-supported-by-tidb-operator-v11" class="table-of-contents__link toc-highlight">Switch other components or features managed by chart to services supported by TiDB Operator v1.1</a></li><li><a href="#ad-hoc-backup" class="table-of-contents__link toc-highlight">Ad-hoc backup</a></li><li><a href="#restoration" class="table-of-contents__link toc-highlight">Restoration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docusaurus-operator/">User Manual</a></li><li class="footer__item"><a class="footer__link-item" href="/docusaurus-operator/architecture">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/tidb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://tidb.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>tidb.io<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/pingcap" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/pingcap/tidb-operator" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Source Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 TiDB in Kubernetes Docs, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docusaurus-operator/assets/js/runtime~main.5f239d35.js"></script>
<script src="/docusaurus-operator/assets/js/main.4a76a225.js"></script>
</body>
</html>