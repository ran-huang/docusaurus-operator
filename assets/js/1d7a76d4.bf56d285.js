"use strict";(self.webpackChunkpingcap_docs=self.webpackChunkpingcap_docs||[]).push([[914],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),s=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return i.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,f=d["".concat(l,".").concat(m)]||d[m]||c[m]||a;return n?i.createElement(f,o(o({ref:t},u),{},{components:n})):i.createElement(f,o({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=d;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var s=2;s<a;s++)o[s]=n[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4529:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return p},contentTitle:function(){return l},metadata:function(){return s},assets:function(){return u},toc:function(){return c},default:function(){return m}});var i=n(7462),r=n(3366),a=(n(7294),n(3905)),o=["components"],p={title:"Deploy TiDB Enterprise Edition in Kubernetes",summary:"Learn how to deploy TiDB Enterprise Edition in Kubernetes."},l="Deploy TiDB Enterprise Edition in Kubernetes",s={unversionedId:"deploy-tidb-enterprise-edition",id:"deploy-tidb-enterprise-edition",title:"Deploy TiDB Enterprise Edition in Kubernetes",description:"This document describes how to deploy TiDB Enterprise Edition and related tools in Kubernetes. TiDB Enterprise Edition has the following features:",source:"@site/docs/deploy-tidb-enterprise-edition.md",sourceDirName:".",slug:"/deploy-tidb-enterprise-edition",permalink:"/deploy-tidb-enterprise-edition",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/deploy-tidb-enterprise-edition.md",tags:[],version:"current",frontMatter:{title:"Deploy TiDB Enterprise Edition in Kubernetes",summary:"Learn how to deploy TiDB Enterprise Edition in Kubernetes."},sidebar:"mySidebar",previous:{title:"Deploy a Heterogeneous Cluster for an Existing TiDB Cluster",permalink:"/deploy-heterogeneous-tidb-cluster"},next:{title:"Deploy TiCDC in Kubernetes",permalink:"/deploy-ticdc"}},u={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deploy the Enterprise Edition",id:"deploy-the-enterprise-edition",level:2},{value:"Switch back to the Community Edition",id:"switch-back-to-the-community-edition",level:2}],d={toc:c};function m(e){var t=e.components,n=(0,r.Z)(e,o);return(0,a.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"deploy-tidb-enterprise-edition-in-kubernetes"},"Deploy TiDB Enterprise Edition in Kubernetes"),(0,a.kt)("p",null,"This document describes how to deploy TiDB Enterprise Edition and related tools in Kubernetes. TiDB Enterprise Edition has the following features:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Enterprise-level best practices"),(0,a.kt)("li",{parentName:"ul"},"Enterprise-level service support"),(0,a.kt)("li",{parentName:"ul"},"Fully-enhanced security features")),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"TiDB Operator is ",(0,a.kt)("a",{parentName:"li",href:"/deploy-tidb-operator"},"deployed"),".")),(0,a.kt)("h2",{id:"deploy-the-enterprise-edition"},"Deploy the Enterprise Edition"),(0,a.kt)("p",null,"Currently, the difference between the deployment of TiDB Operator Enterprise Edition and Community Edition mainly lies in image naming. Compared with that of Community Edition, the image of Enterprise Edition has an extra ",(0,a.kt)("inlineCode",{parentName:"p"},"-enterprise")," suffix."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"spec:\n  version: v5.3.0\n  ...\n  pd:\n    baseImage: pingcap/pd-enterprise\n  ...\n  tikv:\n    baseImage: pingcap/tikv-enterprise\n  ...\n  tidb:\n    baseImage: pingcap/tidb-enterprise\n  ...\n  tiflash:\n    baseImage: pingcap/tiflash-enterprise\n  ...\n  pump:\n    baseImage: pingcap/tidb-binlog-enterprise\n  ...\n  ticdc:\n    baseImage: pingcap/ticdc-enterprise\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If you are deploying a new cluster:"),(0,a.kt)("p",{parentName:"li"},"  Refer to ",(0,a.kt)("a",{parentName:"p",href:"/configure-a-tidb-cluster"},"Configure a TiDB Cluster in Kubernetes")," to configure ",(0,a.kt)("inlineCode",{parentName:"p"},"tidb-cluster.yaml")," and Enterprise Edition image as described above, and run the ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl apply -f tidb-cluster.yaml -n ${namespace}")," command to deploy the TiDB Enterprise Edition cluster and related tools.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If you want to switch an existing Community Edition cluster to Enterprise Edition:"),(0,a.kt)("p",{parentName:"li"},"  Run the ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl edit tc ${name} -n ${namespace}"),' command to add the suffix "-enterprise" to each component\'s ',(0,a.kt)("inlineCode",{parentName:"p"},"baseImage")," in the above format, and then update the cluster configuration."),(0,a.kt)("p",{parentName:"li"},"  TiDB Operator will automatically update the cluster image to the enterprise image through a rolling upgrade."))),(0,a.kt)("h2",{id:"switch-back-to-the-community-edition"},"Switch back to the Community Edition"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"spec:\n  version: v5.3.0\n  ...\n  pd:\n    baseImage: pingcap/pd\n  ...\n  tikv:\n    baseImage: pingcap/tikv\n  ...\n  tidb:\n    baseImage: pingcap/tidb\n  ...\n  tiflash:\n    baseImage: pingcap/tiflash\n  ...\n  pump:\n    baseImage: pingcap/tidb-binlog\n  ...\n  ticdc:\n    baseImage: pingcap/ticdc\n")),(0,a.kt)("p",null,"If you need to switch an existing Enterprise Edition cluster back to Community Edition:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'Method #1: Remove the "-enterprise" suffix from the ',(0,a.kt)("inlineCode",{parentName:"li"},"baseImage")," item in the configuration file of the existing cluster in the above format, and run the ",(0,a.kt)("inlineCode",{parentName:"li"},"kubectl apply -f tidb-cluster.yaml -n ${namespace}")," command to update the cluster configuration."),(0,a.kt)("li",{parentName:"ul"},"Method #2: Run the ",(0,a.kt)("inlineCode",{parentName:"li"},"kubectl edit tc ${name} -n ${namespace}"),' command to remove the suffix "-enterprise" from each component\'s ',(0,a.kt)("inlineCode",{parentName:"li"},"baseImage")," in the above format, and then update the cluster configuration.")),(0,a.kt)("p",null,"After updating the configuration, TiDB Operator will automatically switch the cluster image to Community Edition image through a rolling upgrade."))}m.isMDXComponent=!0}}]);