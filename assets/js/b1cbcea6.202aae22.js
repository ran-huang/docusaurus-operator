"use strict";(self.webpackChunkpingcap_docs=self.webpackChunkpingcap_docs||[]).push([[5326],{3905:function(e,t,r){r.d(t,{Zo:function(){return i},kt:function(){return m}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),s=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):c(c({},t),e)),r},i=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,i=u(e,["components","mdxType","originalType","parentName"]),p=s(r),m=o,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return r?n.createElement(f,c(c({ref:t},i),{},{components:r})):n.createElement(f,c({ref:t},i))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,c=new Array(a);c[0]=p;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u.mdxType="string"==typeof e?e:o,c[1]=u;for(var s=2;s<a;s++)c[s]=r[s];return n.createElement.apply(null,c)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},1293:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return u},contentTitle:function(){return l},metadata:function(){return s},assets:function(){return i},toc:function(){return d},default:function(){return m}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),c=["components"],u={title:"Recover the Deleted Cluster",summary:"Learn how to recover a TiDB cluster that has been deleted mistakenly."},l="Recover the Deleted Cluster",s={unversionedId:"recover-deleted-cluster",id:"recover-deleted-cluster",title:"Recover the Deleted Cluster",description:"This document describes how to recover a TiDB cluster that has been deleted mistakenly in Kubernetes. If you have mistakenly deleted a TiDB cluster using TidbCluster, you can use the method introduced in this document to recover the cluster.",source:"@site/docs/recover-deleted-cluster.md",sourceDirName:".",slug:"/recover-deleted-cluster",permalink:"/docusaurus-operator/recover-deleted-cluster",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/recover-deleted-cluster.md",tags:[],version:"current",frontMatter:{title:"Recover the Deleted Cluster",summary:"Learn how to recover a TiDB cluster that has been deleted mistakenly."},sidebar:"mySidebar",previous:{title:"Enable Shards for TidbMonitor",permalink:"/docusaurus-operator/enable-monitor-shards"},next:{title:"Use PD Recover to Recover the PD Cluster",permalink:"/docusaurus-operator/pd-recover"}},i={},d=[],p={toc:d};function m(e){var t=e.components,r=(0,o.Z)(e,c);return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"recover-the-deleted-cluster"},"Recover the Deleted Cluster"),(0,a.kt)("p",null,"This document describes how to recover a TiDB cluster that has been deleted mistakenly in Kubernetes. If you have mistakenly deleted a TiDB cluster using TidbCluster, you can use the method introduced in this document to recover the cluster."),(0,a.kt)("p",null,"TiDB Operator uses PV (Persistent Volume) and PVC (Persistent Volume Claim) to store persistent data. If you accidentally delete a cluster using ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl delete tc"),", the PV/PVC objects and data are still retained to ensure data safety."),(0,a.kt)("p",null,"To recover the deleted cluster, use the ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl create")," command to create a cluster that has the same name and configuration as the deleted one. In the new cluster, the retained PV/PVC and data are reused."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl -n ${namespace} create -f tidb-cluster.yaml\n")))}m.isMDXComponent=!0}}]);