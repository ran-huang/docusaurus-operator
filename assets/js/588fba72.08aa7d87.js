"use strict";(self.webpackChunkpingcap_docs=self.webpackChunkpingcap_docs||[]).push([[6009],{3905:function(t,e,a){a.d(e,{Zo:function(){return s},kt:function(){return c}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var d=n.createContext({}),p=function(t){var e=n.useContext(d),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},s=function(t){var e=p(t.components);return n.createElement(d.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,d=t.parentName,s=o(t,["components","mdxType","originalType","parentName"]),u=p(a),c=r,k=u["".concat(d,".").concat(c)]||u[c]||m[c]||l;return a?n.createElement(k,i(i({ref:e},s),{},{components:a})):n.createElement(k,i({ref:e},s))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=u;var o={};for(var d in e)hasOwnProperty.call(e,d)&&(o[d]=e[d]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},6851:function(t,e,a){a.r(e),a.d(e,{frontMatter:function(){return o},contentTitle:function(){return d},metadata:function(){return p},assets:function(){return s},toc:function(){return m},default:function(){return c}});var n=a(7462),r=a(3366),l=(a(7294),a(3905)),i=["components"],o={title:"RBAC rules required by TiDB Operator",summary:"Introduces the RBAC rules required by TiDB Operator."},d="RBAC rules required by TiDB Operator",p={unversionedId:"tidb-operator-rbac",id:"tidb-operator-rbac",title:"RBAC rules required by TiDB Operator",description:"The role-based access control (RBAC) rules implemented in Kubernetes use Role or ClusterRole for management, and use RoleBinding or ClusterRoleBinding to grant permissions to a user or a group of users.",source:"@site/docs/tidb-operator-rbac.md",sourceDirName:".",slug:"/tidb-operator-rbac",permalink:"/tidb-operator-rbac",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tidb-operator-rbac.md",tags:[],version:"current",frontMatter:{title:"RBAC rules required by TiDB Operator",summary:"Introduces the RBAC rules required by TiDB Operator."},sidebar:"refSidebar",previous:{title:"Command Cheat Sheet for TiDB Cluster Management",permalink:"/cheat-sheet"},next:{title:"TiDB Kubernetes Control User Guide",permalink:"/use-tkctl"}},s={},m=[{value:"Manage TiDB clusters at the cluster level",id:"manage-tidb-clusters-at-the-cluster-level",level:2},{value:"<code>tidb-controller-manager</code> ClusterRole permissions",id:"tidb-controller-manager-clusterrole-permissions",level:3},{value:"<code>tidb-scheduler</code> ClusterRole permissions",id:"tidb-scheduler-clusterrole-permissions",level:3},{value:"Manage TiDB clusters at the namespace level",id:"manage-tidb-clusters-at-the-namespace-level",level:2},{value:"<code>tidb-controller-manager</code> ClusterRole permissions",id:"tidb-controller-manager-clusterrole-permissions-1",level:3},{value:"<code>tidb-controller-manager</code> Role permissions",id:"tidb-controller-manager-role-permissions",level:3},{value:"<code>tidb-scheduler</code> Role permissions",id:"tidb-scheduler-role-permissions",level:3}],u={toc:m};function c(t){var e=t.components,a=(0,r.Z)(t,i);return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"rbac-rules-required-by-tidb-operator"},"RBAC rules required by TiDB Operator"),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/access-authn-authz/rbac/"},"role-based access control (RBAC)")," rules implemented in Kubernetes use Role or ClusterRole for management, and use RoleBinding or ClusterRoleBinding to grant permissions to a user or a group of users."),(0,l.kt)("h2",{id:"manage-tidb-clusters-at-the-cluster-level"},"Manage TiDB clusters at the cluster level"),(0,l.kt)("p",null,"If the default setting ",(0,l.kt)("inlineCode",{parentName:"p"},"clusterScoped=true")," is unchanged during the TiDB Operator deployment, TiDB Operator manages all TiDB clusters within a Kubernetes cluster."),(0,l.kt)("p",null,"To check the ClusterRole created for TiDB Operator, run the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl get clusterrole | grep tidb\n")),(0,l.kt)("p",null,"The example output is as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"tidb-operator:tidb-controller-manager                                  2021-05-04T13:08:55Z\ntidb-operator:tidb-scheduler                                           2021-05-04T13:08:55Z\n")),(0,l.kt)("p",null,"In the output above:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tidb-operator:tidb-controller-manager")," is the ClusterRole created for the ",(0,l.kt)("inlineCode",{parentName:"li"},"tidb-controller-manager")," Pod."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tidb-operator:tidb-scheduler")," is the ClusterRole created for the ",(0,l.kt)("inlineCode",{parentName:"li"},"tidb-scheduler")," Pod.")),(0,l.kt)("h3",{id:"tidb-controller-manager-clusterrole-permissions"},(0,l.kt)("inlineCode",{parentName:"h3"},"tidb-controller-manager")," ClusterRole permissions"),(0,l.kt)("p",null,"The following table lists the permissions corresponding to the ",(0,l.kt)("inlineCode",{parentName:"p"},"tidb-controller-manager")," ClusterRole."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Resource"),(0,l.kt)("th",{parentName:"tr",align:null},"Non-resource URLs"),(0,l.kt)("th",{parentName:"tr",align:null},"Resource name"),(0,l.kt)("th",{parentName:"tr",align:null},"Action"),(0,l.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"events"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Exports event information")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"services"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the service resources")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"statefulsets.apps.pingcap.com/status"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the StatefulSet resource when ",(0,l.kt)("inlineCode",{parentName:"td"},"AdvancedStatefulSet=true"),". For more information, see ",(0,l.kt)("a",{parentName:"td",href:"/advanced-statefulset"},"Advanced StatefulSet Controller"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"statefulsets.apps.pingcap.com"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the StatefulSet resource when ",(0,l.kt)("inlineCode",{parentName:"td"},"AdvancedStatefulSet=true"),". For more information, see ",(0,l.kt)("a",{parentName:"td",href:"/advanced-statefulset"},"Advanced StatefulSet Controller"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"controllerrevisions.apps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the version of Kubernetes StatefulSet/Daemonset")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"deployments.apps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Deployment resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"statefulsets.apps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Statefulset resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ingresses.extensions"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Ingress resource for the monitoring system")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"*.pingcap.com"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of all customized resources under pingcap.com")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"configmaps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create get list watch update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the ConfigMap resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"endpoints"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create get list watch update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Endpoints resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"serviceaccounts"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create get update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create ServiceAccount for the TidbMonitor/Discovery service")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"clusterrolebindings.rbac.authorization.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create get update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create ClusterRoleBinding for the TidbMonitor service")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"rolebindings.rbac.authorization.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create get update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create RoleBinding for the TidbMonitor/Discovery service")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"secrets"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create update get list watch delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Secret resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"clusterroles.rbac.authorization.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[escalate create get update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create ClusterRole for the TidbMonitor service")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"roles.rbac.authorization.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[escalate create get update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create Role for the TidbMonitor/Discovery service")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"persistentvolumeclaims"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch create update delete patch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the PVC resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jobs.batch"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch create update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Use jobs to perform TiDB cluster initialization, backup, and restore operations")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"persistentvolumes"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch patch update]"),(0,l.kt)("td",{parentName:"tr",align:null},"Perform operations such as adding labels related to cluster information for PV and modifying ",(0,l.kt)("inlineCode",{parentName:"td"},"persistentVolumeReclaimPolicy"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pods"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Pod resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"nodes"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read node labels and set store labels for TiKV and TiFlash accordingly")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"storageclasses.storage.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Verify whether StorageClass supports ",(0,l.kt)("inlineCode",{parentName:"td"},"VolumeExpansion")," before expanding PVC storage")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[/metrics]"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read monitoring metrics")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Non-resource URLs")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have non-resource URLs."),(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Resource name")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have a resource name."),(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Actions")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"*")," indicates that the resource supports all actions that can be performed on a Kubernetes cluster.")))),(0,l.kt)("h3",{id:"tidb-scheduler-clusterrole-permissions"},(0,l.kt)("inlineCode",{parentName:"h3"},"tidb-scheduler")," ClusterRole permissions"),(0,l.kt)("p",null,"The following table lists the permissions corresponding to the ",(0,l.kt)("inlineCode",{parentName:"p"},"tidb-scheduler")," ClusterRole."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Resource"),(0,l.kt)("th",{parentName:"tr",align:null},"Non-resource URLs"),(0,l.kt)("th",{parentName:"tr",align:null},"Resource name"),(0,l.kt)("th",{parentName:"tr",align:null},"Action"),(0,l.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"leases.coordination.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create lease resource locks for leader election")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"endpoints"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[delete get patch update]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Endpoints resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"persistentvolumeclaims"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list update]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read PVC information of PD/TiKV and update the scheduling information to the PVC label")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"configmaps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read the ConfigMap resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pods"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read Pod information")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"nodes"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read node information")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"leases.coordination.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[tidb-scheduler]"),(0,l.kt)("td",{parentName:"tr",align:null},"[get update]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read and update lease resource locks for leader election")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"tidbclusters.pingcap.com"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read Tidbcluster information")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Non-resource URLs")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have non-resource URLs."),(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Resource name")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have a resource name.")))),(0,l.kt)("h2",{id:"manage-tidb-clusters-at-the-namespace-level"},"Manage TiDB clusters at the namespace level"),(0,l.kt)("p",null,"If ",(0,l.kt)("inlineCode",{parentName:"p"},"clusterScoped=false")," is set during the TiDB Operator deployment, TiDB Operator manages TiDB clusters at the Namespace level."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"To check the ClusterRole created for TiDB Operator, run the following command:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl get clusterrole | grep tidb\n")),(0,l.kt)("p",{parentName:"li"},"  The output is as follows:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"tidb-operator:tidb-controller-manager                                  2021-05-04T13:08:55Z\n")),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("inlineCode",{parentName:"p"},"tidb-operator:tidb-controller-manager")," is the ClusterRole created for the ",(0,l.kt)("inlineCode",{parentName:"p"},"tidb-controller-manager")," Pod."),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note:")),(0,l.kt)("p",{parentName:"blockquote"},"During the TiDB Operator deployment, if ",(0,l.kt)("inlineCode",{parentName:"p"},"controllerManager.clusterPermissions.nodes"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"controllerManager.clusterPermissions.persistentvolumes"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"controllerManager.clusterPermissions.storageclasses")," are all set to ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),", TiDB operator will not create this ClusterRole."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"To check the roles created for TiDB Operator, run the following command:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl get role -n tidb-admin\n")),(0,l.kt)("p",{parentName:"li"},"  The example output is as follows:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"tidb-admin    tidb-operator:tidb-controller-manager            2021-05-04T13:08:55Z\ntidb-admin    tidb-operator:tidb-scheduler                     2021-05-04T13:08:55Z\n")),(0,l.kt)("p",{parentName:"li"},"  In the output:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tidb-operator:tidb-controller-manager")," is the role created for the ",(0,l.kt)("inlineCode",{parentName:"li"},"tidb-controller-manager")," Pod."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tidb-operator:tidb-scheduler")," is the role created for the ",(0,l.kt)("inlineCode",{parentName:"li"},"tidb-scheduler")," Pod.")))),(0,l.kt)("h3",{id:"tidb-controller-manager-clusterrole-permissions-1"},(0,l.kt)("inlineCode",{parentName:"h3"},"tidb-controller-manager")," ClusterRole permissions"),(0,l.kt)("p",null,"The following table lists the permissions corresponding to the ",(0,l.kt)("inlineCode",{parentName:"p"},"tidb-controller-manager")," ClusterRole."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Resource"),(0,l.kt)("th",{parentName:"tr",align:null},"Non-resource URLs"),(0,l.kt)("th",{parentName:"tr",align:null},"Resource name"),(0,l.kt)("th",{parentName:"tr",align:null},"Action"),(0,l.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"persistentvolumes"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch patch update]"),(0,l.kt)("td",{parentName:"tr",align:null},"Perform operations such as adding labels related to cluster information for PV and modifying ",(0,l.kt)("inlineCode",{parentName:"td"},"persistentVolumeReclaimPolicy"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"nodes"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read node Labels and set store Labels for TiKV and TiFlash accordingly")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"storageclasses.storage.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Verify whether StorageClass supports ",(0,l.kt)("inlineCode",{parentName:"td"},"VolumeExpansion")," before expanding PVC storage")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Non-resource URLs")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have non-resource URLs."),(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Resource name")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have a resource name.")))),(0,l.kt)("h3",{id:"tidb-controller-manager-role-permissions"},(0,l.kt)("inlineCode",{parentName:"h3"},"tidb-controller-manager")," Role permissions"),(0,l.kt)("p",null,"The following table lists the permissions corresponding to the ",(0,l.kt)("inlineCode",{parentName:"p"},"tidb-controller-manager")," Role."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Resource"),(0,l.kt)("th",{parentName:"tr",align:null},"Non-resource URLs"),(0,l.kt)("th",{parentName:"tr",align:null},"Resource name"),(0,l.kt)("th",{parentName:"tr",align:null},"Action"),(0,l.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"events"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Export event information")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"services"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the service resources")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"statefulsets.apps.pingcap.com/status"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the StatefulSet resource when ",(0,l.kt)("inlineCode",{parentName:"td"},"AdvancedStatefulSet=true"),". For more information, see ",(0,l.kt)("a",{parentName:"td",href:"/advanced-statefulset"},"Advanced StatefulSet Controller"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"statefulsets.apps.pingcap.com"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the StatefulSet resource when ",(0,l.kt)("inlineCode",{parentName:"td"},"AdvancedStatefulSet=true"),". For more information, see ",(0,l.kt)("a",{parentName:"td",href:"/advanced-statefulset"},"Advanced StatefulSet Controller"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"controllerrevisions.apps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the version of Kubernetes StatefulSet/Daemonset")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"deployments.apps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Deployment resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"statefulsets.apps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Statefulset resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ingresses.extensions"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Ingress resource for the monitoring system")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"*.pingcap.com"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[*]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of all customized resources under pingcap.com")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"configmaps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create get list watch update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the ConfigMap resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"endpoints"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create get list watch update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Endpoints resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"serviceaccounts"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create get update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create ServiceAccount for the TidbMonitor/Discovery service")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"rolebindings.rbac.authorization.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create get update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create ClusterRoleBinding for the TidbMonitor service")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"secrets"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create update get list watch delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Secret resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"roles.rbac.authorization.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[escalate create get update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create Role for the TidbMonitor/Discovery service")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"persistentvolumeclaims"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch create update delete patch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the PVC resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jobs.batch"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch create update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Use jobs to perform TiDB cluster initialization, backup, and restore operations")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pods"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch update delete]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Pod resource")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Non-resource URLs")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have non-resource URLs."),(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Resource names")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have a resource name."),(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Actions")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"*")," indicates that the resource supports all actions that can be performed on a Kubernetes cluster.")))),(0,l.kt)("h3",{id:"tidb-scheduler-role-permissions"},(0,l.kt)("inlineCode",{parentName:"h3"},"tidb-scheduler")," Role permissions"),(0,l.kt)("p",null,"The following table lists the permissions corresponding to the ",(0,l.kt)("inlineCode",{parentName:"p"},"tidb-scheduler")," Role."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Resource"),(0,l.kt)("th",{parentName:"tr",align:null},"Non-resource URLs"),(0,l.kt)("th",{parentName:"tr",align:null},"Resource name"),(0,l.kt)("th",{parentName:"tr",align:null},"Action"),(0,l.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"leases.coordination.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[create]"),(0,l.kt)("td",{parentName:"tr",align:null},"Create lease resource locks for leader election")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"endpoints"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[delete get patch update]"),(0,l.kt)("td",{parentName:"tr",align:null},"Control the access of the Endpoints resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"persistentvolumeclaims"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list update]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read PVC information of PD/TiKV and update the scheduling information to the PVC label")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"configmaps"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read the ConfigMap resource")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pods"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list watch]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read pod information")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"nodes"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get list]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read node information")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"leases.coordination.k8s.io"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[tidb-scheduler]"),(0,l.kt)("td",{parentName:"tr",align:null},"[get update]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read and update lease resource locks for leader election")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"tidbclusters.pingcap.com"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"-"),(0,l.kt)("td",{parentName:"tr",align:null},"[get]"),(0,l.kt)("td",{parentName:"tr",align:null},"Read Tidbcluster information")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Non-resource URLs")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have non-resource URLs."),(0,l.kt)("li",{parentName:"ul"},"In the ",(0,l.kt)("strong",{parentName:"li"},"Resource name")," column, ",(0,l.kt)("inlineCode",{parentName:"li"},"-")," indicates that the item does not have a resource name.")))))}c.isMDXComponent=!0}}]);