"use strict";(self.webpackChunkpingcap_docs=self.webpackChunkpingcap_docs||[]).push([[8771],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return m}});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),s=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(a),m=n,k=c["".concat(p,".").concat(m)]||c[m]||d[m]||o;return a?r.createElement(k,i(i({ref:t},u),{},{components:a})):r.createElement(k,i({ref:t},u))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var s=2;s<o;s++)i[s]=a[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}c.displayName="MDXCreateElement"},7643:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},assets:function(){return u},toc:function(){return d},default:function(){return m}});var r=a(7462),n=a(3366),o=(a(7294),a(3905)),i=["components"],l={title:"Deploy TiDB Operator in Kubernetes",summary:"Learn how to deploy TiDB Operator in Kubernetes."},p="Deploy TiDB Operator in Kubernetes",s={unversionedId:"deploy-tidb-operator",id:"deploy-tidb-operator",title:"Deploy TiDB Operator in Kubernetes",description:"This document describes how to deploy TiDB Operator in Kubernetes.",source:"@site/docs/deploy-tidb-operator.md",sourceDirName:".",slug:"/deploy-tidb-operator",permalink:"/docusaurus-operator/deploy-tidb-operator",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/deploy-tidb-operator.md",tags:[],version:"current",frontMatter:{title:"Deploy TiDB Operator in Kubernetes",summary:"Learn how to deploy TiDB Operator in Kubernetes."},sidebar:"mySidebar",previous:{title:"Persistent Storage Class Configuration in Kubernetes",permalink:"/docusaurus-operator/configure-storage-class"},next:{title:"Configure a TiDB Cluster in Kubernetes",permalink:"/docusaurus-operator/configure-a-tidb-cluster"}},u={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deploy the Kubernetes cluster",id:"deploy-the-kubernetes-cluster",level:3},{value:"Install Helm",id:"install-helm",level:3},{value:"Deploy TiDB Operator",id:"deploy-tidb-operator",level:2},{value:"Create CRD",id:"create-crd",level:3},{value:"Customize TiDB Operator deployment",id:"customize-tidb-operator-deployment",level:3},{value:"Online deployment",id:"online-deployment",level:4},{value:"Offline installation",id:"offline-installation",level:4},{value:"Customize TiDB Operator",id:"customize-tidb-operator",level:2}],c={toc:d};function m(e){var t=e.components,a=(0,n.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"deploy-tidb-operator-in-kubernetes"},"Deploy TiDB Operator in Kubernetes"),(0,o.kt)("p",null,"This document describes how to deploy TiDB Operator in Kubernetes."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"Before deploying TiDB Operator, make sure the following items are installed on your machine:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Kubernetes >= v1.12"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/tasks/access-application-cluster/configure-dns-cluster/"},"DNS addons")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/concepts/storage/persistent-volumes/"},"PersistentVolume")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/admin/authorization/rbac"},"RBAC")," enabled (optional)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://helm.sh"},"Helm 3"))),(0,o.kt)("h3",{id:"deploy-the-kubernetes-cluster"},"Deploy the Kubernetes cluster"),(0,o.kt)("p",null,"TiDB Operator runs in the Kubernetes cluster. You can refer to ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/setup/"},"the document of how to set up Kubernetes")," to set up a Kubernetes cluster. Make sure that the Kubernetes version is v1.12 or higher. If you want to deploy a very simple Kubernetes cluster for testing purposes, consult the ",(0,o.kt)("a",{parentName:"p",href:"/docusaurus-operator/get-started"},"Get Started")," document."),(0,o.kt)("p",null,"For some public cloud environments, refer to the following documents:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docusaurus-operator/deploy-on-aws-eks"},"Deploy on AWS EKS")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docusaurus-operator/deploy-on-gcp-gke"},"Deploy on GCP GKE")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docusaurus-operator/deploy-on-alibaba-cloud"},"Deploy on Alibaba Cloud ACK"))),(0,o.kt)("p",null,"TiDB Operator uses ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/storage/persistent-volumes/"},"Persistent Volumes")," to persist the data of TiDB cluster (including the database, monitoring data, and backup data), so the Kubernetes cluster must provide at least one kind of persistent volumes."),(0,o.kt)("p",null,"It is recommended to enable ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/admin/authorization/rbac"},"RBAC")," in the Kubernetes cluster."),(0,o.kt)("h3",{id:"install-helm"},"Install Helm"),(0,o.kt)("p",null,"Refer to ",(0,o.kt)("a",{parentName:"p",href:"/docusaurus-operator/tidb-toolkit#use-helm"},"Use Helm")," to install Helm and configure it with the official PingCAP chart repository."),(0,o.kt)("h2",{id:"deploy-tidb-operator"},"Deploy TiDB Operator"),(0,o.kt)("h3",{id:"create-crd"},"Create CRD"),(0,o.kt)("p",null,"TiDB Operator uses ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/#customresourcedefinitions"},"Custom Resource Definition (CRD)")," to extend Kubernetes. Therefore, to use TiDB Operator, you must first create the ",(0,o.kt)("inlineCode",{parentName:"p"},"TidbCluster")," CRD, which is a one-time job in your Kubernetes cluster."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f https://raw.githubusercontent.com/pingcap/tidb-operator/v1.2.4/manifests/crd.yaml\n")),(0,o.kt)("p",null,"If the server cannot access the Internet, you need to download the ",(0,o.kt)("inlineCode",{parentName:"p"},"crd.yaml")," file on a machine with Internet access before installing:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"wget https://raw.githubusercontent.com/pingcap/tidb-operator/v1.2.4/manifests/crd.yaml\nkubectl apply -f ./crd.yaml\n")),(0,o.kt)("p",null,"If the following message is displayed, the CRD installation is successful:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl get crd\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"NAME                                 CREATED AT\nbackups.pingcap.com                  2020-06-11T07:59:40Z\nbackupschedules.pingcap.com          2020-06-11T07:59:41Z\nrestores.pingcap.com                 2020-06-11T07:59:40Z\ntidbclusterautoscalers.pingcap.com   2020-06-11T07:59:42Z\ntidbclusters.pingcap.com             2020-06-11T07:59:38Z\ntidbinitializers.pingcap.com         2020-06-11T07:59:42Z\ntidbmonitors.pingcap.com             2020-06-11T07:59:41Z\n")),(0,o.kt)("h3",{id:"customize-tidb-operator-deployment"},"Customize TiDB Operator deployment"),(0,o.kt)("p",null,"To deploy TiDB Operator quickly, you can refer to ",(0,o.kt)("a",{parentName:"p",href:"/docusaurus-operator/get-started#step-2-deploy-tidb-operator"},"Deploy TiDB Operator"),". This section describes how to customize the deployment of TiDB Operator."),(0,o.kt)("p",null,"After creating CRDs in the step above, there are two methods to deploy TiDB Operator on your Kubernetes cluster: online and offline."),(0,o.kt)("p",null,"When you use TiDB Operator, ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-scheduler")," is not mandatory. Refer to ",(0,o.kt)("a",{parentName:"p",href:"/docusaurus-operator/tidb-scheduler#tidb-scheduler-and-default-scheduler"},"tidb-scheduler and default-scheduler")," to confirm whether you need to deploy ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-scheduler"),". If you do not need ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-scheduler"),", you can configure ",(0,o.kt)("inlineCode",{parentName:"p"},"scheduler.create: false")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"values.yaml")," file, so ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-scheduler")," is not deployed."),(0,o.kt)("h4",{id:"online-deployment"},"Online deployment"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Get the ",(0,o.kt)("inlineCode",{parentName:"p"},"values.yaml")," file of the ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-operator")," chart you want to deploy:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"mkdir -p ${HOME}/tidb-operator && \\\nhelm inspect values pingcap/tidb-operator --version=${chart_version} > ${HOME}/tidb-operator/values-tidb-operator.yaml\n")),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note:")),(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("inlineCode",{parentName:"p"},"${chart_version}")," represents the chart version of TiDB Operator. For example, ",(0,o.kt)("inlineCode",{parentName:"p"},"v1.2.7"),". You can view the currently supported versions by running the ",(0,o.kt)("inlineCode",{parentName:"p"},"helm search repo -l tidb-operator")," command."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Configure TiDB Operator"),(0,o.kt)("p",{parentName:"li"},"TiDB Operator manages all TiDB clusters in the Kubernetes cluster by default. If you only need it to manage clusters in a specific namespace, you can set ",(0,o.kt)("inlineCode",{parentName:"p"},"clusterScoped: false")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"values.yaml"),"."),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note:")),(0,o.kt)("p",{parentName:"blockquote"},"After setting ",(0,o.kt)("inlineCode",{parentName:"p"},"clusterScoped: false"),", TiDB Operator will still operate Nodes, Persistent Volumes, and Storage Classes in the Kubernetes cluster by default. If the role that deploys TiDB Operator does not have the permissions to operate these resources, you can set the corresponding permission request under ",(0,o.kt)("inlineCode",{parentName:"p"},"controllerManager.clusterPermissions")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," to disable TiDB Operator's operations on these resources.")),(0,o.kt)("p",{parentName:"li"},"You can modify other items such as ",(0,o.kt)("inlineCode",{parentName:"p"},"limits"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"requests"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"replicas")," as needed.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Deploy TiDB Operator"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"helm install tidb-operator pingcap/tidb-operator --namespace=tidb-admin --version=${chart_version} -f ${HOME}/tidb-operator/values-tidb-operator.yaml && \\\nkubectl get po -n tidb-admin -l app.kubernetes.io/name=tidb-operator\n")),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note:")),(0,o.kt)("p",{parentName:"blockquote"},"If the corresponding ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-admin")," namespace does not exist, you can create the namespace first by running the ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl create namespace tidb-admin")," command."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Upgrade TiDB Operator"),(0,o.kt)("p",{parentName:"li"},"If you need to upgrade the TiDB Operator, modify the ",(0,o.kt)("inlineCode",{parentName:"p"},"${HOME}/tidb-operator/values-tidb-operator.yaml")," file, and then execute the following command to upgrade:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"helm upgrade tidb-operator pingcap/tidb-operator --namespace=tidb-admin -f ${HOME}/tidb-operator/values-tidb-operator.yaml\n")))),(0,o.kt)("h4",{id:"offline-installation"},"Offline installation"),(0,o.kt)("p",null,"If your server cannot access the Internet, install TiDB Operator offline by the following steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Download the ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-operator")," chart"),(0,o.kt)("p",{parentName:"li"},"If the server has no access to the Internet, you cannot configure the Helm repository to install the TiDB Operator component and other applications. At this time, you need to download the chart file needed for cluster installation on a machine with Internet access, and then copy it to the server."),(0,o.kt)("p",{parentName:"li"},"Use the following command to download the ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-operator")," chart file:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"wget http://charts.pingcap.org/tidb-operator-v1.2.7.tgz\n")),(0,o.kt)("p",{parentName:"li"},"Copy the ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-operator-v1.2.7.tgz")," file to the target server and extract it to the current directory:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"tar zxvf tidb-operator.v1.2.7.tgz\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Download the Docker images used by TiDB Operator"),(0,o.kt)("p",{parentName:"li"},"If the server has no access to the Internet, you need to download all Docker images used by TiDB Operator on a machine with Internet access and upload them to the server, and then use ",(0,o.kt)("inlineCode",{parentName:"p"},"docker load")," to install the Docker image on the server."),(0,o.kt)("p",{parentName:"li"},"The Docker images used by TiDB Operator are:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"pingcap/tidb-operator:v1.2.7\npingcap/tidb-backup-manager:v1.2.7\nbitnami/kubectl:latest\npingcap/advanced-statefulset:v0.3.3\nk8s.gcr.io/kube-scheduler:v1.16.9\n")),(0,o.kt)("p",{parentName:"li"},"Among them, ",(0,o.kt)("inlineCode",{parentName:"p"},"k8s.gcr.io/kube-scheduler:v1.16.9")," should be consistent with the version of your Kubernetes cluster. You do not need to download it separately."),(0,o.kt)("p",{parentName:"li"},"Next, download all these images using the following command:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker pull pingcap/tidb-operator:v1.2.7\ndocker pull pingcap/tidb-backup-manager:v1.2.7\ndocker pull bitnami/kubectl:latest\ndocker pull pingcap/advanced-statefulset:v0.3.3\n\ndocker save -o tidb-operator-v1.2.7.tar pingcap/tidb-operator:v1.2.7\ndocker save -o tidb-backup-manager-v1.2.7.tar pingcap/tidb-backup-manager:v1.2.7\ndocker save -o bitnami-kubectl.tar bitnami/kubectl:latest\ndocker save -o advanced-statefulset-v0.3.3.tar pingcap/advanced-statefulset:v0.3.3\n")),(0,o.kt)("p",{parentName:"li"},"Next, upload these Docker images to the server, and execute ",(0,o.kt)("inlineCode",{parentName:"p"},"docker load")," to install these Docker images on the server:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker load -i tidb-operator-v1.2.7.tar\ndocker load -i tidb-backup-manager-v1.2.7.tar\ndocker load -i bitnami-kubectl.tar\ndocker load -i advanced-statefulset-v0.3.3.tar\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Configure TiDB Operator"),(0,o.kt)("p",{parentName:"li"},"TiDB Operator embeds a ",(0,o.kt)("inlineCode",{parentName:"p"},"kube-scheduler")," to implement a custom scheduler. If you need to deploy ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-scheduler"),", modify the ",(0,o.kt)("inlineCode",{parentName:"p"},"./tidb-operator/values.yaml")," file to configure the Docker image's name and version of this built-in ",(0,o.kt)("inlineCode",{parentName:"p"},"kube-scheduler")," component. For example, if ",(0,o.kt)("inlineCode",{parentName:"p"},"kube-scheduler")," in your Kubernetes cluster uses the image ",(0,o.kt)("inlineCode",{parentName:"p"},"k8s.gcr.io/kube-scheduler:v1.16.9"),", set ",(0,o.kt)("inlineCode",{parentName:"p"},"./tidb-operator/values.yaml")," as follows:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"...\nscheduler:\n  serviceAccount: tidb-scheduler\n  logLevel: 2\n  replicas: 1\n  schedulerName: tidb-scheduler\n  resources:\n    limits:\n      cpu: 250m\n      memory: 150Mi\n    requests:\n      cpu: 80m\n      memory: 50Mi\n  kubeSchedulerImageName: k8s.gcr.io/kube-scheduler\n  kubeSchedulerImageTag: v1.16.9\n...\n")),(0,o.kt)("p",{parentName:"li"},"You can modify other items such as ",(0,o.kt)("inlineCode",{parentName:"p"},"limits"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"requests"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"replicas")," as needed.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Install TiDB Operator"),(0,o.kt)("p",{parentName:"li"},"Install TiDB Operator using the following command:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"helm install tidb-operator ./tidb-operator --namespace=tidb-admin\n")),(0,o.kt)("blockquote",{parentName:"li"},(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note:")),(0,o.kt)("p",{parentName:"blockquote"},"If the corresponding ",(0,o.kt)("inlineCode",{parentName:"p"},"tidb-admin")," namespace does not exist, you can create the namespace first by running the ",(0,o.kt)("inlineCode",{parentName:"p"},"kubectl create namespace tidb-admin")," command."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Upgrade TiDB Operator"),(0,o.kt)("p",{parentName:"li"},"If you need to upgrade TiDB Operator, modify the ",(0,o.kt)("inlineCode",{parentName:"p"},"./tidb-operator/values.yaml")," file, and then execute the following command to upgrade:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"helm upgrade tidb-operator ./tidb-operator --namespace=tidb-admin\n")))),(0,o.kt)("h2",{id:"customize-tidb-operator"},"Customize TiDB Operator"),(0,o.kt)("p",null,"To customize TiDB Operator, modify ",(0,o.kt)("inlineCode",{parentName:"p"},"${HOME}/tidb-operator/values-tidb-operator.yaml"),". The rest sections of the document use ",(0,o.kt)("inlineCode",{parentName:"p"},"values.yaml")," to refer to ",(0,o.kt)("inlineCode",{parentName:"p"},"${HOME}/tidb-operator/values-tidb-operator.yaml")),(0,o.kt)("p",null,"TiDB Operator contains two components:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"tidb-controller-manager"),(0,o.kt)("li",{parentName:"ul"},"tidb-scheduler")),(0,o.kt)("p",null,"These two components are stateless and deployed via ",(0,o.kt)("inlineCode",{parentName:"p"},"Deployment"),". You can customize resource ",(0,o.kt)("inlineCode",{parentName:"p"},"limit"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"request"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"replicas")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"values.yaml")," file."),(0,o.kt)("p",null,"After modifying ",(0,o.kt)("inlineCode",{parentName:"p"},"values.yaml"),", run the following command to apply this modification:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"helm upgrade tidb-operator pingcap/tidb-operator --version=${chart_version} --namespace=tidb-admin -f ${HOME}/tidb-operator/values-tidb-operator.yaml\n")))}m.isMDXComponent=!0}}]);