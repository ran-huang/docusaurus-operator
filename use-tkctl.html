<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<title data-rh="true">TiDB Kubernetes Control User Guide | TiDB in Kubernetes Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ran-huang.github.io/use-tkctl"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="TiDB Kubernetes Control User Guide | TiDB in Kubernetes Docs"><meta data-rh="true" name="description" content="TiDB Kubernetes Control (tkctl) is a command line utility that is used for TiDB Operator to maintain and diagnose the TiDB cluster in Kubernetes."><meta data-rh="true" property="og:description" content="TiDB Kubernetes Control (tkctl) is a command line utility that is used for TiDB Operator to maintain and diagnose the TiDB cluster in Kubernetes."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ran-huang.github.io/use-tkctl"><link data-rh="true" rel="alternate" href="https://ran-huang.github.io/use-tkctl" hreflang="en"><link data-rh="true" rel="alternate" href="https://ran-huang.github.io/use-tkctl" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.732b35c1.css">
<link rel="preload" href="/assets/js/runtime~main.c82b2755.js" as="script">
<link rel="preload" href="/assets/js/main.1f32aa1c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/tidb-logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/tidb-logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">TiDB in Kubernetes</b></a><a class="navbar__item navbar__link" href="/">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/architecture">Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ran-huang/docs-tidb-operator" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/architecture">Architecture</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/benchmark-sysbench">TiDB in Kubernetes Sysbench Performance Test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/pingcap/tidb-operator/blob/master/docs/api-references/docs.md" target="_blank" rel="noopener noreferrer" class="menu__link"><span>API References<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cheat-sheet">Command Cheat Sheet for TiDB Cluster Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tidb-operator-rbac">RBAC rules required by TiDB Operator</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/use-tkctl">Tools</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/use-tkctl">TiDB Kubernetes Control User Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tidb-toolkit">Tools in Kubernetes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/configure-tidb-binlog-drainer">Configure</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/logs-collection">TiDB Log Collection in Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/monitor-kubernetes">Monitoring and Alerts on Kubernetes</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Tools</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/use-tkctl">TiDB Kubernetes Control User Guide</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>TiDB Kubernetes Control User Guide</h1><p>TiDB Kubernetes Control (<code>tkctl</code>) is a command line utility that is used for TiDB Operator to maintain and diagnose the TiDB cluster in Kubernetes.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>PingCAP is no longer maintaining <code>tkctl</code> from v1.1.x, some of the following functions may not be usable, please use the equivalent <code>kubectl</code> commands directly.</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="installation">Installation<a class="hash-link" href="#installation" title="Direct link to heading">â€‹</a></h2><p>To install <code>tkctl</code>, you can download the pre-built binary or build <code>tkctl</code> from source.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="download-the-latest-pre-built-binary">Download the latest pre-built binary<a class="hash-link" href="#download-the-latest-pre-built-binary" title="Direct link to heading">â€‹</a></h3><ul><li><a href="https://download.pingcap.org/tkctl-darwin-amd64-latest.tgz" target="_blank" rel="noopener noreferrer">MacOS</a></li><li><a href="https://download.pingcap.org/tkctl-linux-amd64-latest.tgz" target="_blank" rel="noopener noreferrer">Linux</a></li><li><a href="https://download.pingcap.org/tkctl-windows-amd64-latest.tgz" target="_blank" rel="noopener noreferrer">Windows</a></li></ul><p>After unzipping the downloaded file, you can add the <code>tkctl</code> executable file to your <code>PATH</code> to finish the installation.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="build-from-source">Build from source<a class="hash-link" href="#build-from-source" title="Direct link to heading">â€‹</a></h3><p>Requirement: <a href="https://golang.org/" target="_blank" rel="noopener noreferrer">Go</a> &gt;= the 1.11 version or later</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone --depth</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> https://github.com/pingcap/tidb-operator.git </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">GOOS</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">YOUR_GOOS</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> cli </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> tkctl /usr/local/bin/tkctl</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="shell-auto-completion">Shell auto-completion<a class="hash-link" href="#shell-auto-completion" title="Direct link to heading">â€‹</a></h3><p>You can configure the shell auto-completion for <code>tkctl</code> to simplify its usage.</p><p>To configure the auto-completion for <code>BASH</code>, you need to first install the <a href="https://github.com/scop/bash-completion" target="_blank" rel="noopener noreferrer">bash-completion</a> package, and configure with either of the two methods below:</p><ul><li><p>Configure auto-completion in the current shell:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">source</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tkctl completion </span><span class="token function" style="color:#d73a49">bash</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p>Add auto-completion permanently to your bash shell:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;if hash tkctl 2&gt;/dev/null; then source &lt;(tkctl completion bash); fi&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> ~/.bashrc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><p>To configure the auto-completion for <code>ZSH</code>, you can choose from either of the two methods below:</p><ul><li><p>Configure auto-completion in the current shell:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">source</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tkctl completion </span><span class="token function" style="color:#d73a49">zsh</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li><li><p>Add auto-completion permanently to your zsh shell:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;if hash tkctl 2&gt;/dev/null; then source &lt;(tkctl completion zsh); fi&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> ~/.zshrc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="kubernetes-configuration">Kubernetes configuration<a class="hash-link" href="#kubernetes-configuration" title="Direct link to heading">â€‹</a></h3><p><code>tkctl</code> reuses the <code>kubeconfig</code> file (the default location is <code>~/.kube/config</code>) to connect with the Kubernetes cluster. You can verify whether <code>kubeconfig</code> is correctly configured by using the following command:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl version</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>If the above command correctly outputs the version of TiDB Operator on the server side, then <code>kubeconfig</code> is correctly configured.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="commands">Commands<a class="hash-link" href="#commands" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="tkctl-version">tkctl version<a class="hash-link" href="#tkctl-version" title="Direct link to heading">â€‹</a></h3><p>This command is used to show the version of the local <strong>tkctl</strong> and <strong>tidb-operator</strong> installed in the target cluster.</p><p>For example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl version</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Client Version: v1.0.0-beta.1-p2-93-g6598b4d3e75705-dirty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TiDB Controller Manager Version: pingcap/tidb-operator:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TiDB Scheduler Version: pingcap/tidb-operator:latest</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="tkctl-list">tkctl list<a class="hash-link" href="#tkctl-list" title="Direct link to heading">â€‹</a></h3><p>This command is used to list all installed TiDB clusters.</p><table><thead><tr><th>Flag</th><th>Abbreviation</th><th>Description</th></tr></thead><tbody><tr><td>--all-namespaces</td><td>-A</td><td>Whether to search all Kubernetes namespaces</td></tr><tr><td>--output</td><td>-o</td><td>The output format; you can choose from <!-- -->[default,json,yaml]<!-- -->, and the default format is <code>default</code></td></tr></tbody></table><p>For example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl list -A</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE NAME           PD    TIKV   TIDB   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foo       demo-cluster   3/3   3/3    2/2    11m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bar       demo-cluster   3/3   3/3    1/2    11m</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="tkctl-use">tkctl use<a class="hash-link" href="#tkctl-use" title="Direct link to heading">â€‹</a></h3><p>This command is used to specify the TiDB cluster that the current <code>tkctl</code> command operates on. After you specify a TiDB cluster by using this command, all commands that operates on a cluster will automatically select this cluster so the <code>--tidbcluster</code> option can be omitted.</p><p>For example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl use --namespace</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">foo demo-cluster</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Tidb cluster switched to foo/demo-cluster</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="tkctl-info">tkctl info<a class="hash-link" href="#tkctl-info" title="Direct link to heading">â€‹</a></h3><p>This command is used to display information about the TiDB cluster.</p><table><thead><tr><th>Flag</th><th>Abbreviation</th><th>Description</th></tr></thead><tbody><tr><td>--tidb-cluster</td><td>-t</td><td>Specify a TiDB cluster; default to the TiDB cluster that is being used</td></tr></tbody></table><p>For example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl info</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Name:               demo-cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:          foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CreationTimestamp:  2019-04-17 17:33:41 +0800 CST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Overview:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         Phase    Ready  Desired  CPU    Memory  Storage  Version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         -----    -----  -------  ---    ------  -------  -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PD:    Normal   3      3        200m   1Gi     1Gi      pingcap/pd:v3.0.0-rc.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TiKV:  Normal   3      3        1000m  2Gi     10Gi     pingcap/tikv:v3.0.0-rc.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TiDB   Upgrade  1      2        500m   1Gi              pingcap/tidb:v3.0.0-rc.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Endpoints(NodePort):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 172.16.4.158:31441</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - 172.16.4.155:31441</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="tkctl-get-component">tkctl get <!-- -->[component]<a class="hash-link" href="#tkctl-get-component" title="Direct link to heading">â€‹</a></h3><p>This is a group of commands that are used to get the details of TiDB cluster components.</p><p>You can query the following components: <code>pd</code>, <code>tikv</code>, <code>tidb</code>, <code>volume</code> and <code>all</code> (to query all components).</p><table><thead><tr><th>Flag</th><th>Abbreviation</th><th>Description</th></tr></thead><tbody><tr><td>--tidb-cluster</td><td>-t</td><td>Specify a TiDB cluster; default to the TiDB cluster that is being used</td></tr><tr><td>--output</td><td>-o</td><td>The output format; you can choose from <!-- -->[default,json,yaml]<!-- -->, and the default format is <code>default</code></td></tr></tbody></table><p>For example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl get tikv</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">NAME                  READY   STATUS    MEMORY          CPU   RESTARTS   AGE     NODE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">demo-cluster-tikv-0   2/2     Running   2098Mi/4196Mi   2/2   0          3m19s   172.16.4.155</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">demo-cluster-tikv-1   2/2     Running   2098Mi/4196Mi   2/2   0          4m8s    172.16.4.160</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">demo-cluster-tikv-2   2/2     Running   2098Mi/4196Mi   2/2   0          4m45s   172.16.4.157</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl get volume</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">VOLUME              CLAIM                      STATUS   CAPACITY   NODE           LOCAL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local-pv-d5dad2cf   tikv-demo-cluster-tikv-0   Bound    1476Gi     172.16.4.155   /mnt/disks/local-pv56</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local-pv-5ade8580   tikv-demo-cluster-tikv-1   Bound    1476Gi     172.16.4.160   /mnt/disks/local-pv33</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local-pv-ed2ffe50   tikv-demo-cluster-tikv-2   Bound    1476Gi     172.16.4.157   /mnt/disks/local-pv13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local-pv-74ee0364   pd-demo-cluster-pd-0       Bound    1476Gi     172.16.4.155   /mnt/disks/local-pv46</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local-pv-842034e6   pd-demo-cluster-pd-1       Bound    1476Gi     172.16.4.158   /mnt/disks/local-pv74</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local-pv-e54c122a   pd-demo-cluster-pd-2       Bound    1476Gi     172.16.4.156   /mnt/disks/local-pv72</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="tkctl-debug-pod_name">tkctl debug <!-- -->[pod_name]<a class="hash-link" href="#tkctl-debug-pod_name" title="Direct link to heading">â€‹</a></h3><p>This command is used to diagnose the Pods in a TiDB cluster. It launches a debug launcher Pod which then starts a debug container using the specified docker image on the same host of the target Pod. The container has necessary troubleshooting tools and shares the same namespaces with the container in the target Pod, so you can diagnose the target container by using various tools in the debug container.</p><table><thead><tr><th>Flag</th><th>Abbreviation</th><th>Description</th></tr></thead><tbody><tr><td>--image</td><td></td><td>Specify the docker image used by the debug container; default to <code>pingcap/tidb-debug:lastest</code></td></tr><tr><td>--launcher-image</td><td></td><td>Specify the docker image for the debug launcher pod which is responsible for launching the debug container; default to <code>pingcap/debug-launcher:latest</code></td></tr><tr><td>--container</td><td>-c</td><td>Select the container to be diagnosed; default to the first container of the target Pod</td></tr><tr><td>--docker-socket</td><td></td><td>Specify the docker socket on the target node; default to <code>/var/run/docker.sock</code></td></tr><tr><td>--privileged</td><td></td><td>Whether to enable the <a href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities" target="_blank" rel="noopener noreferrer">privileged</a> mode for the debug container</td></tr></tbody></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The default image of the debug container contains various troubleshooting tools, so the image size is relatively large. If you only need <code>pd-ctl</code> and <code>tidb-ctl</code>, you can specify using the <code>tidb-control</code> image by using the <code>--image=pingcap/tidb-control:latest</code> command line option.</p></div></div><p>For example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl debug demo-cluster-tikv-0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> -ef</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Using tools like <code>GDB</code> and <code>perf</code> in the debug container requires special operations because of the difference in root filesystems of the target container and the debug container.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="gdb">GDB<a class="hash-link" href="#gdb" title="Direct link to heading">â€‹</a></h4><p>When you use GDB to debug the process in the target container, make sure you set the <code>program</code> option to the binary in the <strong>target container</strong>. Additionally, if you use images other than <code>tidb-debug</code> as the debug container or if the <code>pid</code> of the target process is not 1, you have to configure the location of dynamic libraries via the <code>set sysroot</code> command as follows:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl debug demo-cluster-tikv-0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">gdb /proc/</span><span class="token variable" style="color:#36acaa">${pid</span><span class="token variable operator" style="color:#393A34">:-</span><span class="token variable" style="color:#36acaa">1}</span><span class="token plain">/root/tikv-server </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The <code>.gdbinit</code> pre-configured in the <code>tidb-debug</code> image will set <code>sysroot</code> to <code>/proc/1/root/</code> automatically. For this reason, you can omit this following step if you are using the <code>tidb-debug</code> image and the <code>pid</code> of the target process is 1.</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gdb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> sysroot /proc/</span><span class="token variable" style="color:#36acaa">${pid}</span><span class="token plain">/root/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Start debugging:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gdb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> thread apply all bt</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gdb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> info threads</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="perf-and-flame-graphs">Perf and flame graphs<a class="hash-link" href="#perf-and-flame-graphs" title="Direct link to heading">â€‹</a></h4><p>To use the <code>perf</code> command and the <code>run_flamegraph.sh</code> script properly, you must copy the program from the target container to the same location in the debug container:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl debug demo-cluster-tikv-0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> /proc/1/root/tikv-server /</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">./run_flamegraph.sh </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This script automatically uploads the generated flame graph (SVG format) to <code>transfer.sh</code>, and you can visit the link outputted by the script to download the flame graph.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="tkctl-ctop">tkctl ctop<a class="hash-link" href="#tkctl-ctop" title="Direct link to heading">â€‹</a></h3><p>The complete form of the command is <code>tkctl ctop [pod_name | node/node_name ]</code>.</p><p>This command is used to view the real-time monitoring stats of the target Pod or node in the cluster. Compared with <code>kubectl top</code>, <code>tkctl ctop</code> also provides network and disk stats, which are important for diagnosing problems in the TiDB cluster.</p><table><thead><tr><th>Flag</th><th>Abbreviation</th><th>Description</th></tr></thead><tbody><tr><td>--image</td><td></td><td>Specify the docker image of ctop; default to <code>quay.io/vektorlab/ctop:0.7.2</code></td></tr><tr><td>--docker-socket</td><td></td><td>Specify the docker socket that ctop uses; default to <code>/var/run/docker.sock</code></td></tr></tbody></table><p>For example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl ctop node/172.16.4.155</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl ctop demo-cluster-tikv-0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="tkctl-help-command">tkctl help <!-- -->[command]<a class="hash-link" href="#tkctl-help-command" title="Direct link to heading">â€‹</a></h3><p>This command is used to print help messages of the sub commands.</p><p>For example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl </span><span class="token builtin class-name">help</span><span class="token plain"> debug</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="tkctl-options">tkctl options<a class="hash-link" href="#tkctl-options" title="Direct link to heading">â€‹</a></h3><p>This command is used to view the global flags of <code>tkctl</code>.</p><p>For example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">tkctl options</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">The following options can be passed to any command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --alsologtostderr=false: log to standard error as well as files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --as=&#x27;&#x27;: Username to impersonate for the operation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --as-group=[]: Group to impersonate for the operation, this flag can be repeated to specify multiple groups.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --cache-dir=&#x27;/Users/alei/.kube/http-cache&#x27;: Default HTTP cache directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --certificate-authority=&#x27;&#x27;: Path to a cert file for the certificate authority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --client-certificate=&#x27;&#x27;: Path to a client certificate file for TLS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --client-key=&#x27;&#x27;: Path to a client key file for TLS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --cluster=&#x27;&#x27;: The name of the kubeconfig cluster to use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --context=&#x27;&#x27;: The name of the kubeconfig context to use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --insecure-skip-tls-verify=false: If true, the server&#x27;s certificate will not be checked for validity. This will</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make your HTTPS connections insecure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --kubeconfig=&#x27;&#x27;: Path to the kubeconfig file to use for CLI requests.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --log_backtrace_at=:0: when logging hits line file:N, emit a stack trace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --log_dir=&#x27;&#x27;: If non-empty, write log files in this directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --logtostderr=true: log to standard error instead of files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n, --namespace=&#x27;&#x27;: If present, the namespace scope for this CLI request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --request-timeout=&#x27;0&#x27;: The length of time to wait before giving up on a single server request. Non-zero values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">should contain a corresponding time unit (e.g. 1s, 2m, 3h). A value of zero means don&#x27;t timeout requests.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s, --server=&#x27;&#x27;: The address and port of the Kubernetes API server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --stderrthreshold=2: logs at or above this threshold go to stderr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -t, --tidbcluster=&#x27;&#x27;: Tidb cluster name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --token=&#x27;&#x27;: Bearer token for authentication to the API server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --user=&#x27;&#x27;: The name of the kubeconfig user to use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v, --v=0: log level for V logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --vmodule=: comma-separated list of pattern=N settings for file-filtered logging</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>These options are mainly used to connect with the Kubernetes cluster and two commonly used options among them are as follows:</p><ul><li><code>--context</code>: specify the target Kubernetes cluster</li><li><code>--namespace</code>: specify the Kubernetes namespace</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/use-tkctl.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/tidb-operator-rbac"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RBAC rules required by TiDB Operator</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/tidb-toolkit"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tools in Kubernetes</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#download-the-latest-pre-built-binary" class="table-of-contents__link toc-highlight">Download the latest pre-built binary</a></li><li><a href="#build-from-source" class="table-of-contents__link toc-highlight">Build from source</a></li><li><a href="#shell-auto-completion" class="table-of-contents__link toc-highlight">Shell auto-completion</a></li><li><a href="#kubernetes-configuration" class="table-of-contents__link toc-highlight">Kubernetes configuration</a></li></ul></li><li><a href="#commands" class="table-of-contents__link toc-highlight">Commands</a><ul><li><a href="#tkctl-version" class="table-of-contents__link toc-highlight">tkctl version</a></li><li><a href="#tkctl-list" class="table-of-contents__link toc-highlight">tkctl list</a></li><li><a href="#tkctl-use" class="table-of-contents__link toc-highlight">tkctl use</a></li><li><a href="#tkctl-info" class="table-of-contents__link toc-highlight">tkctl info</a></li><li><a href="#tkctl-get-component" class="table-of-contents__link toc-highlight">tkctl get component</a></li><li><a href="#tkctl-debug-pod_name" class="table-of-contents__link toc-highlight">tkctl debug pod_name</a></li><li><a href="#tkctl-ctop" class="table-of-contents__link toc-highlight">tkctl ctop</a></li><li><a href="#tkctl-help-command" class="table-of-contents__link toc-highlight">tkctl help command</a></li><li><a href="#tkctl-options" class="table-of-contents__link toc-highlight">tkctl options</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">User Manual</a></li><li class="footer__item"><a class="footer__link-item" href="/architecture">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/tidb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://tidb.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>tidb.io<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/pingcap" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/pingcap/tidb-operator" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Source Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 TiDB in Kubernetes Docs, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c82b2755.js"></script>
<script src="/assets/js/main.1f32aa1c.js"></script>
</body>
</html>